<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <title>Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: 'Tajawal', system-ui;
      background: #000;
      color: #fff;
      margin: 0;
      padding: 20px;
      text-align: center;
    }
    .scene {
      background: #0e0e0e;
      border: 1px solid #333;
      border-radius: 16px;
      padding: 24px;
      max-width: 600px;
      margin: 40px auto;
    }
    #sceneTitle {
      font-size: 22px;
      margin-bottom: 20px;
      color: #ffdc73;
    }
    .choices {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .btn {
      background: #141414;
      border: 1px solid #333;
      border-radius: 12px;
      padding: 16px;
      font-size: 18px;
      color: #fff;
      cursor: pointer;
    }
    .btn:hover {
      background: #1a1a1a;
    }
    .status {
      margin-top: 15px;
      font-size: 14px;
      color: #888;
    }
  </style>
</head>

<body>
  <h1>Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©</h1>
  
  <div class="scene">
    <div id="sceneTitle">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
    <div class="choices">
      <button id="choiceLeft" class="btn">...</button>
      <button id="choiceRight" class="btn">...</button>
    </div>
    <div class="status" id="status">â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
    <button onclick="loadData()" style="margin-top:10px; padding:8px 16px; background:#333; color:white; border:none; border-radius:6px; cursor:pointer;">
      ğŸ”„ ØªØ­Ø¯ÙŠØ«
    </button>
  </div>

  <script>
    // Use the RAW GitHub URL of your admin.html file
    const BACKEND_URL = 'https://raw.githubusercontent.com/beamingkhaled/beamingkhaled.github.io/main/admin.html';

    async function loadData() {
      try {
        document.getElementById('status').textContent = 'â³ Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...';
        
        // Fetch with cache busting
        const response = await fetch(BACKEND_URL + '?t=' + Date.now());
        const html = await response.text();
        
        // Simple text extraction - find the JSON part
        const start = html.indexOf('{"title":');
        const end = html.indexOf('}</pre>') + 1;
        
        if (start === -1 || end === -1) {
          throw new Error('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
        }
        
        const jsonText = html.substring(start, end);
        const data = JSON.parse(jsonText);
        
        // Update the page
        document.getElementById('sceneTitle').textContent = data.title;
        document.getElementById('choiceLeft').textContent = data.left;
        document.getElementById('choiceRight').textContent = data.right;
        document.getElementById('status').textContent = 'âœ… ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«: ' + new Date().toLocaleTimeString();
        
      } catch (error) {
        document.getElementById('status').textContent = 'âŒ Ø®Ø·Ø£: ' + error.message;
        console.error('Error:', error);
      }
    }

    // Add click events to buttons
    document.getElementById('choiceLeft').onclick = function() {
      alert('Ø§Ø®ØªØ±Øª: ' + this.textContent);
    };
    
    document.getElementById('choiceRight').onclick = function() {
      alert('Ø§Ø®ØªØ±Øª: ' + this.textContent);
    };

    // Load data immediately and every 10 seconds
    loadData();
    setInterval(loadData, 10000);

    // Also load when page becomes visible
    document.addEventListener('visibilitychange', function() {
      if (!document.hidden) {
        loadData();
      }
    });
  </script>
</body>
</html>
