<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© | Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª</title>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap" rel="stylesheet">
  <style>
    :root { --bg:#000; --card:#151515; --text:#fff; --muted:#9aa0a6; --radius:18px; }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--text);
      font-family:'Tajawal',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      display:flex; align-items:center; justify-content:center;
    }
    .wrap{width:min(720px,92vw); padding:20px}
    .btn{
      display:block; width:100%; padding:18px 20px; margin:16px 0;
      background:#191919; border:1px solid #222; border-radius:var(--radius);
      color:#fff; font-size:clamp(18px,3.8vw,28px); font-weight:800; text-align:center;
      box-shadow:0 10px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.04);
      transition:transform .08s ease;
    }
    .title{
      background:#101010; border:1px solid #222; border-radius:var(--radius);
      padding:22px; margin:10px 0 22px 0; font-size:clamp(20px,4.6vw,32px); font-weight:800;
      text-align:center; line-height:1.35;
      box-shadow:0 12px 34px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.04);
    }
    .clock{color:var(--muted); text-align:center; font-size:12px; margin-top:16px}
  </style>
</head>
<body>
  <div class="wrap">
    <div id="title" class="title">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øªâ€¦</div>
    <button id="leftBtn" class="btn">â€”</button>
    <button id="rightBtn" class="btn">â€”</button>
    <div class="clock">Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: <span id="updated">â€”</span></div>
  </div>

  <script>
    // âœ… Read from GitHub Pages (faster than raw.githubusercontent)
    const JSON_URL = "https://beamingkhaled.github.io/Q8/choices.json";

    const titleEl   = document.getElementById('title');
    const leftBtn   = document.getElementById('leftBtn');
    const rightBtn  = document.getElementById('rightBtn');
    const updatedEl = document.getElementById('updated');

    let lastStamp = '';

    async function loadChoices(force=false){
      try{
        // hard-bust cache every request
        const res = await fetch(JSON_URL + '?t=' + Date.now(), { cache: 'no-store' });
        if(!res.ok) throw new Error('HTTP '+res.status);
        const data = await res.json();

        if(force || data.updatedAt !== lastStamp){
          lastStamp = data.updatedAt || '';
          titleEl.textContent  = data.title  || 'â€”';
          leftBtn.textContent  = data.left   || 'â€”';
          rightBtn.textContent = data.right  || 'â€”';
          updatedEl.textContent = lastStamp ? new Date(lastStamp).toLocaleTimeString('ar-KW') : 'â€”';
        }
      }catch(e){
        titleEl.textContent = 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª';
        leftBtn.textContent = rightBtn.textContent = 'â€”';
        updatedEl.textContent = 'â€”';
      }
    }

    loadChoices(true);                 // first load immediately
    setInterval(loadChoices, 1000);    // ðŸ” poll every 1s (no manual refresh)
    document.addEventListener('visibilitychange', ()=>{ if(!document.hidden) loadChoices(true) });
  </script>
</body>
</html>
